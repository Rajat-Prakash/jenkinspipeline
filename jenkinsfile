pipeline{
agent any
stages {

      stage('Publish SNS') {
         steps {
            echo 'Publishing SNS message to AWS'
            withCredentials([usernamePassword(credentialsId: '45472be1-a363-45a4-97a3-a65abf4f1bc4', accessKeyVariable: 'AKIAYKRTF7QR7JTPV3SU', secretKeyVariable: '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')]) {
                snsPublish(
                    topicArn:'arn:aws:iam::572411739171:user/emailNotifier',
                    subject:"${params.ACTION} ${params.AWS_ENVIRONMENT}",
                    message: getMessage(mapEnvironmentToAWS[params.AWS_ENVIRONMENT], params.ACTION )
                    )
            }
         }
      }
   }
   }



// stages
// {
// stage('Build')
// {
// steps{
// echo "Building the Code.........."
// bat "mvn clean"
// }
// }
// stage('Test')
// {
// steps{
// echo "Testing the Code.........."
// bat "mvn test"
// }
// }
// stage('Compile')
// {
// steps{
// echo "Compiling the Project.........."
// bat "mvn compile"
// }
// }
// stage('Deploy')
// {
// steps{
// echo "Deploying the Project.........."
// }
// }
// }
// }
